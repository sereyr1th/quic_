{
  "server": {
    "httpPort": 80,
    "httpsPort": 443,
    "readTimeout": 30000000000,
    "writeTimeout": 30000000000,
    "maxIdleTime": 300000000000
  },
  "loadBalancer": {
    "strategy": "least_connections",
    "healthCheck": {
      "enabled": true,
      "interval": 15000000000,
      "timeout": 5000000000,
      "healthyThreshold": 2,
      "unhealthyThreshold": 3,
      "path": "/admin/cli/healthcheck.php"
    },
    "backendServers": [
      {
        "id": "moodle-web-1",
        "host": "10.0.1.10",
        "port": 80,
        "weight": 2,
        "healthy": true,
        "lastCheck": "0001-01-01T00:00:00Z"
      },
      {
        "id": "moodle-web-2",
        "host": "10.0.1.11",
        "port": 80,
        "weight": 2,
        "healthy": true,
        "lastCheck": "0001-01-01T00:00:00Z"
      },
      {
        "id": "moodle-web-3",
        "host": "10.0.1.12",
        "port": 80,
        "weight": 1,
        "healthy": true,
        "lastCheck": "0001-01-01T00:00:00Z"
      }
    ],
    "sessionPersistence": true,
    "connectionMigration": true
  },
  "moodle": {
    "dataRoot": "/shared/moodledata",
    "wwwRoot": "/var/www/moodle",
    "sessionCookie": "MoodleSession",
    "proxyHeaders": {
      "X-Forwarded-For": "$remote_addr",
      "X-Forwarded-Host": "$host",
      "X-Forwarded-Proto": "$scheme",
      "X-Real-IP": "$remote_addr",
      "X-Forwarded-Port": "$server_port"
    },
    "phpFpmSocket": "/run/php/php8.2-fpm.sock",
    "enableCaching": true
  },
  "tls": {
    "certFile": "/etc/ssl/certs/moodle.example.com.pem",
    "keyFile": "/etc/ssl/private/moodle.example.com.key",
    "minVersion": "1.2",
    "maxVersion": "1.3",
    "nextProtos": [
      "h3",
      "h2",
      "http/1.1"
    ],
    "enableH3": true,
    "enableH2": true,
    "enableH1": true
  },
  "logging": {
    "level": "info",
    "format": "json",
    "enableMetrics": true,
    "logConnections": true,
    "logMigrations": true
  }
}